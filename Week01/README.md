1. #### 关于微服务的基础知识

   1. ##### 概念

      微服务是一种用于构建应用的架构方案。微服务架构有别于更为传统的单体式方案，可将应用拆分成多个核心功能。每个功能都称为一项服务，可以单独构建和部署，这意味着各项服务在工作和出现故障时不会相互影响。

   2. ##### 架构要素

      微服务具有**服务组件化、去中心化、基础设施自动化**等特点，基于这些特点可以提炼出构建微服务架构的三大要素：**服务建模、技术体系、研发过程**

      1. ###### 服务建模

         针对服务建模，需要先明确服务的类别，以及服务与业务之间的关系，尽可能的明确领域的边界。可以使用领域驱动设计(Domain Driven Design，DDD)方法，通过识别领域中的各个子域、判断这些子域是否独立、考虑子域与子域的交互关系，从而明确各个界限上下文(Boundary Context)之间的边界。

         系统中的各个子域可以分为**核心子域**、**支撑子域**和**通用子域**。其中系统中核心业务称为核心子域，专注于某一方面的子域称为支撑子域，可以作为某种基础设施的子域可以归到通用子域。

         服务建模的本质是为了满足业务需求，服务围绕业务能力建模，而业务能力往往体现出分层结构，可以将业务体系中的服务分为以下几种类型：**基础服务**、**通用服务**、**定制服务**和**其它服务**

      2. ###### 技术体系

         微服务架构相关技术体系比较复杂，但可以归纳分为以下八大技术体系：**服务通信、服务治理、服务路由、服务容错、服务网关、服务配置、服务安全、服务监控**

         1. 服务通信

            网络通信是任何分布式系统的基础组件。在微服务架构中我们关注的是**网络连接模式、I/O模型、服务调用方式**

            网络连接：长连接和短链接

            I/O模型：阻塞式和非阻塞式

            服务调用方式：异步和同步

         2. 服务治理

            最为关键的一个技术组件，一般称为**注册中心**。是保存服务调用所需的路由信息的存储仓库，也是服务提供者和服务消费者进行交互的媒介，充当着服务注册和发现服务器的作用。一般是通过Zookeeper、Etcd、Eureka等分布式系统协调工具构建

         3. 服务路由

            负载均衡是最常见的一种服务路由方案

         4. 服务容错

            对于分布式环境中的服务而言，服务在自身失败引发错误的同时，还会因为依赖其它服务而导致失败，所以需要考虑各种场景的服务容错机制。

            集群容错策略：失效转移Failover 

            服务隔离机制：线程隔离、进程隔离

            服务限流机制：滑动窗口、令牌桶算法

            服务熔断机制：

         5. 服务网关

            也叫网关API，封装了系统内部架构，为每一个客户端提供一个定制的API。所有客户端和消费端都通过统一的网关接入微服务，在网关层处理所有的非业务功能。

            在功能设计上，服务网关在完成客户端与服务器端报文格式转换的同时，它可能还具有身份验证、监控、缓存、请求管理、静态响应处理等功能。另一方面，也可以在网关层制定灵活的路由策略。针对一些特定的 API，我们需要设置白名单、路由规则等各类限制

         6. 服务配置

            与注册中心一样，配置中心也是微服务架构中的基础组件，其目的也是对服务进行统一管理，区别在于配置中心管理的对象是配置信息而不是服务的实例信息。

            配置中心通常需要依赖分布式协调机制，通过一定的方法确保配置信息在分布式环境中的各个服务中能得到实时、一致的管理。可以采用诸如 Zookeeper 等主流的开源分布式协调框架来构建配置中心

         7. 服务安全

            一般意义上的访问安全性，都是围绕认证和授权这两个核心概念来展开的。首先确定用户身份，然后确定这个用户是否具有访问指定资源的权限。站在多个服务交互的角度讲，我们需要确保 Token 在各个微服务之间的有效传播。另一方面，服务内部，我们可以使用不同的访问策略限制服务资源的访问。

         8. 服务监控

            当服务数量达到一定量级时，我们难免会遇到两个核心问题。一个是如何管理服务之间的调用关系，另一个是如何跟踪业务流的处理过程和结果，这就需要构建分布式服务跟踪机制。

            分布式服务跟踪机制的建立需要完成调用链数据的生成、采集、存储及查询，同时也需要对这些调用链数据进行运算和可视化管理

      3. ###### 研发过程

         微服务需要围绕“业务功能”组织团队的研发管理。

         任何一个需求，无论大小，都将导致跨团队协作，从而增加沟通和协作成本。而微服务架构则倾向围绕业务功能的组织来分割服务，而不是面向某项技术能力。因此，团队是跨职能的特征团队，每个服务都围绕着业务进行构建，并且能够被独立部署到生产环境

   3. 

2. #### 关于本周课程的学习笔记

   1. 微服务概览 & 微服务设计
      1. 可以把微服务看作使SOA的一种实践。围绕业务功能构建的，服务关注单一业务，服务间采用轻量级的通信机制，可以全自动独立部署，可以使用不同的编程语言和数据存储技术。微服务架 构通过业务拆分实现服务组件化，通过组件组合快速开发系统，业务单一的服务组件又可以独立部署， 使得整个系统变得清晰灵活
      2. 
   2. gRPC & 服务发现
   3. 多集群 & 多租户

3. #### 一些补充知识

   1. 康威定律

      康威定律是马尔文·康威1967提出的：“设计系统的架构受制于产生这些设计的组织的沟通结构。”通俗的来讲：产品必然是其（人员）组织沟通结构的缩影。

      - 第一定律 组织沟通方式会通过系统设计表达出来。
   - 第二定律 时间再多一件事情也不可能做的完美，但总有时间做完一件事情。
      - 第三定律 线型系统和线型组织架构间有潜在的异质同态特性。
   - 第四定律 大的系统组织总是比小系统更倾向于分解。
   
2. Envoy
   
3. BFF，Backend for Frontend
   
   
   
4. SSR ， Server-Side Rendering
   
5. DDD，Domain Driven Design
   
6. CQRS
   
   7. Sevice Mesh
   
   8. JWT
   
   9. GitLab和GitHub
   
   10. protocol buffer